# å•†å®¶æ¨èç³»ç»Ÿä½¿ç”¨æŒ‡å—

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

å•†å®¶æ¨èç³»ç»Ÿæ˜¯æƒç›Šå¹³å°V5çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€,æ—¨åœ¨ä¸ºç”³è¯·æ”¿åºœè¡¥è´´çš„ç”¨æˆ·æä¾›æ™ºèƒ½åŒ–çš„å•†å®¶æ¨èæœåŠ¡,å¸®åŠ©ç”¨æˆ·å¿«é€Ÿæ‰¾åˆ°åˆé€‚çš„å•†å®¶å®Œæˆæ¶ˆè´¹,å½¢æˆ"è¡¥è´´ç”³è¯· â†’ å•†å®¶æ¨è â†’ æ¶ˆè´¹è½¬åŒ–"çš„å®Œæ•´ä¸šåŠ¡é—­ç¯ã€‚

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç”¨æˆ·ç«¯ä½¿ç”¨æµç¨‹

#### ç¬¬ä¸€æ­¥: å®Œæˆå®åè®¤è¯

1. æ‰“å¼€åº”ç”¨,è¿›å…¥"æˆ‘çš„"é¡µé¢
2. ç‚¹å‡»"å®åè®¤è¯"å…¥å£
3. æŒ‰ç…§æç¤ºå®Œæˆ4æ­¥è®¤è¯æµç¨‹:
   - å¡«å†™ä¸ªäººä¿¡æ¯
   - ä¸Šä¼ èº«ä»½è¯ç…§ç‰‡
   - äººè„¸è¯†åˆ«éªŒè¯
   - å®Œæˆè®¤è¯

> âš ï¸ **é‡è¦**: åªæœ‰å®Œæˆå®åè®¤è¯åæ‰èƒ½æŸ¥çœ‹å•†å®¶æ¨è

#### ç¬¬äºŒæ­¥: è¿›å…¥æ”¿åºœè¡¥è´´é¡µé¢

1. ä»é¦–é¡µæˆ–åº•éƒ¨å¯¼èˆªè¿›å…¥"æ”¿åºœè¡¥è´´"
2. æŸ¥çœ‹å¯ç”³è¯·çš„è¡¥è´´æ”¿ç­–
3. åœ¨é¡µé¢é¡¶éƒ¨å¯ä»¥çœ‹åˆ°"æ¨èå•†æˆ·"åŒºåŸŸ

#### ç¬¬ä¸‰æ­¥: æŸ¥çœ‹å•†å®¶æ¨è

**æ–¹å¼ä¸€: åœ¨è¡¥è´´ä¸»é¡µæŸ¥çœ‹**
- ä½ç½®: è¡¥è´´æ”¿ç­–åˆ—è¡¨é¡¶éƒ¨
- å±•ç¤º: 3ä¸ªæ¨èå•†å®¶
- æ“ä½œ: ç‚¹å‡»"æŸ¥çœ‹å…¨éƒ¨"æŸ¥çœ‹æ›´å¤š

**æ–¹å¼äºŒ: ç”³è¯·æˆåŠŸåæŸ¥çœ‹**
- ä½ç½®: è¡¥è´´ç”³è¯·æˆåŠŸé¡µé¢
- å±•ç¤º: æ ¹æ®ç”³è¯·ç±»å‹æ¨èçš„3ä¸ªå•†å®¶
- æ“ä½œ: ç‚¹å‡»å•†å®¶å¡ç‰‡æŸ¥çœ‹è¯¦æƒ…

#### ç¬¬å››æ­¥: æŸ¥çœ‹å•†å®¶è¯¦æƒ…

1. ç‚¹å‡»ä»»æ„å•†å®¶å¡ç‰‡
2. è·³è½¬åˆ°å•†å®¶è¯¦æƒ…é¡µ
3. æŸ¥çœ‹å•†å®¶ä¿¡æ¯:
   - åŸºæœ¬ä¿¡æ¯(åç§°ã€åœ°å€ã€ç”µè¯)
   - è¯„åˆ†å’Œè¯„ä»·
   - ä¼˜æƒ ä¿¡æ¯
   - è¥ä¸šæ—¶é—´
   - ç‰¹è‰²æœåŠ¡
   - èµ„è´¨è®¤è¯

#### ç¬¬äº”æ­¥: è”ç³»å•†å®¶

åœ¨å•†å®¶è¯¦æƒ…é¡µå¯ä»¥:
- ğŸ“ æ‹¨æ‰“ç”µè¯å’¨è¯¢
- ğŸ—ºï¸ å¯¼èˆªåˆ°å•†å®¶ä½ç½®
- ğŸ’° æŸ¥çœ‹ä¼˜æƒ è¯¦æƒ…
- â­ æŸ¥çœ‹ç”¨æˆ·è¯„ä»·

---

## ğŸ“Š å•†å®¶æ¨èé€»è¾‘

### æ¨èç®—æ³•è¯´æ˜

ç³»ç»Ÿé‡‡ç”¨å¤šç»´åº¦æ™ºèƒ½è¯„åˆ†ç®—æ³•,ç»¼åˆè€ƒè™‘ä»¥ä¸‹å› ç´ :

#### 1. è·ç¦»å› ç´  (æƒé‡30%)

- åŸºäºç”¨æˆ·å½“å‰ä½ç½®
- è·ç¦»è¶Šè¿‘,åˆ†æ•°è¶Šé«˜
- è®¡ç®—å…¬å¼: `è·ç¦»åˆ†æ•° = max(0, 100 - è·ç¦»(km) Ã— 10)`

**ç¤ºä¾‹**:
- 1å…¬é‡Œå†…: 90-100åˆ†
- 1-3å…¬é‡Œ: 70-90åˆ†
- 3-5å…¬é‡Œ: 50-70åˆ†
- 5å…¬é‡Œä»¥ä¸Š: <50åˆ†

#### 2. è´¨é‡å› ç´  (æƒé‡30%)

- å•†å®¶è¯„åˆ†(1-5æ˜Ÿ)
- è¯„ä»·æ•°é‡
- è®¡ç®—å…¬å¼: `è´¨é‡åˆ†æ•° = è¯„åˆ† Ã— 20 + min(è¯„ä»·æ•°/100, 1) Ã— 20`

**ç¤ºä¾‹**:
- 5æ˜Ÿ+1000è¯„ä»·: 100åˆ†
- 4.5æ˜Ÿ+500è¯„ä»·: 90-95åˆ†
- 4æ˜Ÿ+200è¯„ä»·: 80-85åˆ†

#### 3. äººæ°”å› ç´  (æƒé‡20%)

- é”€é‡æ•°æ®
- æˆç«‹å¹´é™
- è®¡ç®—å…¬å¼: `äººæ°”åˆ†æ•° = min(é”€é‡/500, 1) Ã— 50 + min(å¹´é™/10, 1) Ã— 50`

**ç¤ºä¾‹**:
- é”€é‡5ä¸‡+,æˆç«‹10å¹´+: 100åˆ†
- é”€é‡2ä¸‡+,æˆç«‹5å¹´+: 75åˆ†
- é”€é‡1ä¸‡+,æˆç«‹3å¹´+: 50åˆ†

#### 4. ä¼˜æƒ å› ç´  (æƒé‡20%)

- ä¼˜æƒ åŠ›åº¦(0-100%)
- è®¡ç®—å…¬å¼: `ä¼˜æƒ åˆ†æ•° = ä¼˜æƒ åŠ›åº¦`

**ç¤ºä¾‹**:
- 20%ä¼˜æƒ : 20åˆ†
- 15%ä¼˜æƒ : 15åˆ†
- 10%ä¼˜æƒ : 10åˆ†

### ç»¼åˆè¯„åˆ†å…¬å¼

```
æ€»åˆ† = è·ç¦»åˆ†æ•° Ã— 0.3 + è´¨é‡åˆ†æ•° Ã— 0.3 + äººæ°”åˆ†æ•° Ã— 0.2 + ä¼˜æƒ åˆ†æ•° Ã— 0.2
```

**è¯„åˆ†ç­‰çº§**:
- 90-100åˆ†: â­â­â­â­â­ å¼ºçƒˆæ¨è
- 80-89åˆ†: â­â­â­â­ æ¨è
- 70-79åˆ†: â­â­â­ å¯é€‰æ‹©
- 60-69åˆ†: â­â­ å¤‡é€‰
- <60åˆ†: ä¸æ¨è

---

## ğŸª å•†å®¶ç±»å‹è¯´æ˜

ç³»ç»Ÿæ”¯æŒ6å¤§ç±»å•†å®¶,å¯¹åº”ä¸åŒçš„è¡¥è´´ç±»å‹:

### 1. æ±½è½¦ç»é”€å•† (car_dealer)

**å¯¹åº”è¡¥è´´**: æ±½è½¦ä»¥æ—§æ¢æ–°è¡¥è´´

**å…¸å‹å•†å®¶**:
- æ±Ÿè‹æ±½è½¦åŸ
- è‹å®æ±½è½¦
- å„å“ç‰Œ4Såº—

**æœåŠ¡ç‰¹è‰²**:
- å®˜æ–¹æˆæƒ
- ä»¥æ—§æ¢æ–°
- é‡‘èæœåŠ¡
- ä¸Šé—¨è¯•é©¾

### 2. å®¶ç”µå•†åº— (appliance_store)

**å¯¹åº”è¡¥è´´**: å®¶ç”µä»¥æ—§æ¢æ–°è¡¥è´´ã€æ™ºèƒ½ç»¿è‰²å®¶ç”µè¡¥è´´

**å…¸å‹å•†å®¶**:
- è‹å®æ˜“è´­
- å›½ç¾ç”µå™¨
- äº¬ä¸œå®¶ç”µ

**æœåŠ¡ç‰¹è‰²**:
- å“ç±»é½å…¨
- é€è´§ä¸Šé—¨
- å…è´¹å®‰è£…
- æ—§æœºå›æ”¶

### 3. å®¶å…·å•†åº— (furniture_store)

**å¯¹åº”è¡¥è´´**: å®¶å…·ä»¥æ—§æ¢æ–°è¡¥è´´

**å…¸å‹å•†å®¶**:
- å®œå®¶å®¶å±…
- çº¢æ˜Ÿç¾å‡¯é¾™
- å±…ç„¶ä¹‹å®¶

**æœåŠ¡ç‰¹è‰²**:
- è®¾è®¡æœåŠ¡
- é…é€å®‰è£…
- ç¯ä¿æè´¨
- è´¨ä¿æœåŠ¡

### 4. è£…ä¿®å…¬å¸ (renovation_company)

**å¯¹åº”è¡¥è´´**: ä½æˆ¿è£…ä¿®è¡¥è´´

**å…¸å‹å•†å®¶**:
- é‡‘è³è‚è£…é¥°
- ä¸œæ˜“æ—¥ç››
- ä¸šä¹‹å³°è£…é¥°

**æœåŠ¡ç‰¹è‰²**:
- è®¾è®¡æ–½å·¥ä¸€ä½“
- ç¯ä¿ææ–™
- è´¨ä¿æ‰¿è¯º
- åˆ†æœŸä»˜æ¬¾

### 5. 3Cæ•°ç åº— (3c_store)

**å¯¹åº”è¡¥è´´**: 3Cäº§å“è¡¥è´´

**å…¸å‹å•†å®¶**:
- Apple Store
- å°ç±³ä¹‹å®¶
- åä¸ºä½“éªŒåº—

**æœåŠ¡ç‰¹è‰²**:
- æ­£å“ä¿è¯
- ä»¥æ—§æ¢æ–°
- ä¸“ä¸šæœåŠ¡
- æŠ€æœ¯æ”¯æŒ

### 6. ç»¿è‰²å®¶ç”µåº— (green_appliance)

**å¯¹åº”è¡¥è´´**: æ™ºèƒ½ç»¿è‰²å®¶ç”µè¡¥è´´

**å…¸å‹å•†å®¶**:
- ä¸“ä¸šç»¿è‰²å®¶ç”µåº—
- èŠ‚èƒ½äº§å“ä¸“å–åº—

**æœåŠ¡ç‰¹è‰²**:
- èŠ‚èƒ½è®¤è¯
- æ™ºèƒ½åŒ–äº§å“
- ç¯ä¿æè´¨
- æ”¿åºœè®¤å¯

---

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

### æŠ€å·§1: ä¼˜å…ˆæŸ¥çœ‹é«˜åˆ†å•†å®¶

- æ¨èåˆ†æ•°90+çš„å•†å®¶é€šå¸¸ç»¼åˆå®åŠ›æœ€å¼º
- å…³æ³¨"æ¨èåº¦"å¾½ç« ,æ•°å­—è¶Šå¤§è¶Šå¥½

### æŠ€å·§2: å…³æ³¨è·ç¦»å’Œä¼˜æƒ 

- è·ç¦»è¿‘çš„å•†å®¶èŠ‚çœæ—¶é—´å’Œäº¤é€šæˆæœ¬
- ä¼˜æƒ åŠ›åº¦å¤§çš„å•†å®¶æ›´å®æƒ 
- åœ¨è·ç¦»å’Œä¼˜æƒ ä¹‹é—´æ‰¾å¹³è¡¡

### æŠ€å·§3: æŸ¥çœ‹è¯„ä»·å’Œèµ„è´¨

- è¯„ä»·æ•°å¤šçš„å•†å®¶æ›´å¯é 
- æœ‰å®˜æ–¹è®¤è¯çš„å•†å®¶æ›´æœ‰ä¿éšœ
- æŸ¥çœ‹ç”¨æˆ·çœŸå®è¯„ä»·äº†è§£æœåŠ¡è´¨é‡

### æŠ€å·§4: æå‰ç”µè¯å’¨è¯¢

- ç¡®è®¤è¡¥è´´æ”¿ç­–æ”¯æŒæƒ…å†µ
- äº†è§£åº“å­˜å’Œä»·æ ¼
- é¢„çº¦åˆ°åº—æ—¶é—´
- å’¨è¯¢å…·ä½“ä¼˜æƒ ç»†èŠ‚

### æŠ€å·§5: å¯¹æ¯”å¤šå®¶å•†å®¶

- ç‚¹å‡»"æŸ¥çœ‹å…¨éƒ¨"æµè§ˆæ›´å¤šå•†å®¶
- å¯¹æ¯”ä»·æ ¼ã€æœåŠ¡ã€è¯„ä»·
- é€‰æ‹©æœ€é€‚åˆè‡ªå·±çš„å•†å®¶

---

## ğŸ”§ å¼€å‘è€…æŒ‡å—

### ç»„ä»¶ä½¿ç”¨

#### åŸºç¡€ç”¨æ³•

```vue
<template>
  <MerchantRecommend 
    :subsidy-type="'car'"
    :limit="3"
  />
</template>

<script setup>
import MerchantRecommend from '@/components/subsidy/MerchantRecommend.vue'
</script>
```

#### Propsè¯´æ˜

| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| subsidyType | SubsidyType | æ˜¯ | - | è¡¥è´´ç±»å‹ |
| limit | number | å¦ | 5 | æ˜¾ç¤ºå•†å®¶æ•°é‡ |

#### SubsidyTypeæšä¸¾

```typescript
type SubsidyType = 
  | 'car'                    // æ±½è½¦ä»¥æ—§æ¢æ–°
  | 'appliance'              // å®¶ç”µä»¥æ—§æ¢æ–°
  | 'furniture'              // å®¶å…·ä»¥æ—§æ¢æ–°
  | 'renovation'             // ä½æˆ¿è£…ä¿®
  | '3c'                     // 3Cäº§å“
  | 'smart_green_appliance'  // æ™ºèƒ½ç»¿è‰²å®¶ç”µ
```

### Storeä½¿ç”¨

#### è·å–æ¨èå•†å®¶

```typescript
import { useMerchantStore } from '@/stores/merchant'

const merchantStore = useMerchantStore()

// è·å–æ¨èå•†å®¶
const merchants = merchantStore.recommendMerchants('car', 5)

// æ ¼å¼åŒ–è·ç¦»
const distance = merchantStore.formatDistance(1500) // "1.5km"

// è·å–ç”¨æˆ·ä½ç½®
await merchantStore.getCurrentLocation()
```

#### å•†å®¶æ•°æ®ç»“æ„

```typescript
interface Merchant {
  id: string                    // å•†å®¶ID
  name: string                  // å•†å®¶åç§°
  category: MerchantCategory    // å•†å®¶ç±»åˆ«
  logo: string                  // Logo URL
  images: string[]              // å›¾ç‰‡åˆ—è¡¨
  rating: number                // è¯„åˆ†(1-5)
  reviewCount: number           // è¯„ä»·æ•°
  location: {                   // ä½ç½®ä¿¡æ¯
    lat: number
    lng: number
    address: string
    district: string
  }
  distance?: number             // è·ç¦»(ç±³)
  discountRate: number          // ä¼˜æƒ åŠ›åº¦(0-100)
  subsidySupport: SubsidyType[] // æ”¯æŒçš„è¡¥è´´ç±»å‹
  tags: string[]                // æ ‡ç­¾
  description: string           // æè¿°
  phone: string                 // ç”µè¯
  businessHours: string         // è¥ä¸šæ—¶é—´
  features: string[]            // ç‰¹è‰²æœåŠ¡
  certifications: string[]      // èµ„è´¨è®¤è¯
  salesVolume: number           // é”€é‡
  establishedYear: number       // æˆç«‹å¹´ä»½
}
```

### æ·»åŠ æ–°å•†å®¶

åœ¨ `merchant.ts` ä¸­æ·»åŠ :

```typescript
{
  id: 'm031',
  name: 'æ–°å•†å®¶åç§°',
  category: 'car_dealer',
  logo: 'https://example.com/logo.png',
  images: ['https://example.com/img1.jpg'],
  rating: 4.8,
  reviewCount: 1000,
  location: {
    lat: 32.0603,
    lng: 118.7969,
    address: 'è¯¦ç»†åœ°å€',
    district: 'åŒºåŸŸ'
  },
  discountRate: 15,
  subsidySupport: ['car'],
  tags: ['æ ‡ç­¾1', 'æ ‡ç­¾2'],
  description: 'å•†å®¶æè¿°',
  phone: '025-1234-5678',
  businessHours: '9:00-21:00',
  features: ['ç‰¹è‰²1', 'ç‰¹è‰²2'],
  certifications: ['è®¤è¯1', 'è®¤è¯2'],
  salesVolume: 10000,
  establishedYear: 2015
}
```

### è‡ªå®šä¹‰æ¨èç®—æ³•

ä¿®æ”¹ `merchant.ts` ä¸­çš„æƒé‡:

```typescript
const totalScore = 
  distanceScore * 0.3 +    // è·ç¦»æƒé‡
  qualityScore * 0.3 +     // è´¨é‡æƒé‡
  popularityScore * 0.2 +  // äººæ°”æƒé‡
  discountScore * 0.2      // ä¼˜æƒ æƒé‡
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆçœ‹ä¸åˆ°å•†å®¶æ¨è?

**A**: è¯·æ£€æŸ¥ä»¥ä¸‹æ¡ä»¶:
1. æ˜¯å¦å·²å®Œæˆå®åè®¤è¯
2. æ˜¯å¦åœ¨æ”¿åºœè¡¥è´´é¡µé¢
3. æ˜¯å¦é€‰æ‹©äº†è¡¥è´´ç±»å‹

### Q2: å•†å®¶è·ç¦»å¦‚ä½•è®¡ç®—?

**A**: ç³»ç»Ÿä½¿ç”¨Haversineå…¬å¼è®¡ç®—åœ°çƒè¡¨é¢ä¸¤ç‚¹é—´çš„å®é™…è·ç¦»,ç²¾åº¦è¾ƒé«˜ã€‚

### Q3: æ¨èåˆ†æ•°å¦‚ä½•è®¡ç®—?

**A**: ç»¼åˆè€ƒè™‘è·ç¦»ã€è´¨é‡ã€äººæ°”ã€ä¼˜æƒ å››ä¸ªç»´åº¦,è¯¦è§"æ¨èç®—æ³•è¯´æ˜"ç« èŠ‚ã€‚

### Q4: å¯ä»¥æ‰‹åŠ¨é€‰æ‹©ä½ç½®å—?

**A**: å½“å‰ç‰ˆæœ¬ä½¿ç”¨é»˜è®¤ä½ç½®(å—äº¬å¸‚ä¸­å¿ƒ),åç»­ç‰ˆæœ¬å°†æ”¯æŒæ‰‹åŠ¨é€‰æ‹©å’ŒGPSå®šä½ã€‚

### Q5: å•†å®¶ä¿¡æ¯å¦‚ä½•æ›´æ–°?

**A**: å¼€å‘è€…å¯ä»¥åœ¨ `merchant.ts` ä¸­æ›´æ–°å•†å®¶æ•°æ®,ç”Ÿäº§ç¯å¢ƒå»ºè®®æ¥å…¥åç«¯APIã€‚

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### å¼€å‘å›¢é˜Ÿ

- **é¡¹ç›®**: æƒç›Šå¹³å°V5
- **åŠŸèƒ½**: å•†å®¶æ¨èç³»ç»Ÿ
- **ç‰ˆæœ¬**: 1.0.0

### ç›¸å…³æ–‡ä»¶

- `/src/stores/merchant.ts` - å•†å®¶æ•°æ®Store
- `/src/components/subsidy/MerchantRecommend.vue` - æ¨èç»„ä»¶
- `/src/views/MerchantDetail.vue` - å•†å®¶è¯¦æƒ…é¡µ
- `/src/views/GovSubsidy.vue` - æ”¿åºœè¡¥è´´ä¸»é¡µ

### æ–‡æ¡£

- ã€Šå•†å®¶æ¨èç³»ç»Ÿé›†æˆå®ŒæˆæŠ¥å‘Š.mdã€‹
- ã€Šæ”¿åºœè¡¥è´´å“ç±»æ‰©å±•å®æ–½æ€»ç»“.mdã€‹
- ã€Šå®åè®¤è¯åŠŸèƒ½å®Œå–„æ€»ç»“.mdã€‹

---

## ğŸ‰ æ€»ç»“

å•†å®¶æ¨èç³»ç»Ÿä¸ºç”¨æˆ·æä¾›äº†æ™ºèƒ½åŒ–çš„å•†å®¶å‘ç°å’Œé€‰æ‹©æœåŠ¡,é€šè¿‡å¤šç»´åº¦è¯„åˆ†ç®—æ³•,å¸®åŠ©ç”¨æˆ·å¿«é€Ÿæ‰¾åˆ°æœ€åˆé€‚çš„å•†å®¶ã€‚ç³»ç»Ÿè®¾è®¡å……åˆ†è€ƒè™‘äº†ç”¨æˆ·ä½“éªŒå’Œä¸šåŠ¡è½¬åŒ–,æ˜¯æƒç›Šå¹³å°çš„é‡è¦åŠŸèƒ½æ¨¡å—ã€‚

**æ ¸å¿ƒä¼˜åŠ¿**:
- âœ… æ™ºèƒ½æ¨è,ç²¾å‡†åŒ¹é…
- âœ… å¤šç»´è¯„åˆ†,ç»¼åˆè€ƒé‡
- âœ… æ— ç¼é›†æˆ,æµç•…ä½“éªŒ
- âœ… å®Œæ•´é—­ç¯,ä¿ƒè¿›è½¬åŒ–

ç¥æ‚¨ä½¿ç”¨æ„‰å¿«! ğŸŠ

