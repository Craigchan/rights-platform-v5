# 图片占位符应用计划

## 扫描结果

项目中共有 **70 处** `<img>` 标签，分布在 **30 个文件**中。

## 需要应用图片占位符的组件和页面

### 高优先级（商品/内容展示类）

这些页面包含大量商品图片、活动图片等，最需要图片占位符保护：

#### 1. **首页相关** (3个文件)
- `src/views/HomeFeed.vue` - 首页信息流
- `src/views/HomeOptimized.vue` - 优化版首页
- `src/views/SuchaoZone.vue` - 苏潮专区

**应用方式**：商品卡片、活动banner、推荐内容的图片

#### 2. **商品/商户相关** (8个文件)
- `src/views/Search.vue` - 搜索结果页
- `src/views/MerchantDetail.vue` - 商户详情
- `src/views/MerchantOfferDetail.vue` - 商户优惠详情
- `src/views/MerchantOfferDetailEnhanced.vue` - 增强版商户优惠详情
- `src/views/MerchantCouponList.vue` - 商户优惠券列表
- `src/views/Favorites.vue` - 收藏夹
- `src/views/Cart_old.vue` - 购物车（旧版）
- `src/views/Checkout.vue` - 结算页面

**应用方式**：商品图片、商户logo、优惠券图片

#### 3. **订单/票务相关** (5个文件)
- `src/views/Orders.vue` - 订单列表
- `src/views/MyTickets.vue` - 我的票券
- `src/views/TicketDetail.vue` - 票券详情
- `src/views/TicketUpload.vue` - 票券上传
- `src/views/AfterSales.vue` - 售后服务

**应用方式**：商品缩略图、票券图片、上传预览图

#### 4. **优惠券/活动相关** (2个文件)
- `src/views/Vouchers.vue` - 券包
- `src/views/GetLotteryCode.vue` - 获取抽奖码

**应用方式**：优惠券图片、活动图片

### 中优先级（用户/社交类）

#### 5. **个人中心相关** (3个文件)
- `src/views/MineOptimized.vue` - 优化版个人中心
- `src/views/MineRedesigned.vue` - 重设计版个人中心
- `src/views/AccountSettings.vue` - 账户设置

**应用方式**：用户头像、背景图

#### 6. **社交/互动相关** (3个文件)
- `src/views/SocialFeatures.vue` - 社交功能
- `src/views/SubsidyHelpDetail.vue` - 补贴助力详情
- `src/components/share/ShareModal.vue` - 分享弹窗

**应用方式**：用户头像、分享图片

### 低优先级（功能/工具类）

#### 7. **其他功能页面** (6个文件)
- `src/views/CityRights.vue` - 城市权益
- `src/views/ConsumerGuide.vue` - 消费指南
- `src/views/MapCheckIn.vue` - 地图签到
- `src/views/MatchCalendar.vue` - 赛事日历
- `src/views/Feedback.vue` - 意见反馈
- `src/components/checkout/CheckoutDrawer.vue` - 结算抽屉

**应用方式**：功能图标、地图标记、赛事图片

#### 8. **通用组件** (1个文件)
- `src/components/common/SafeImage.vue` - 安全图片组件

**特殊处理**：这个组件本身就是用来处理图片的，需要检查是否可以整合

## 应用策略

### 策略 1：批量添加指令（推荐）

为所有商品图片、用户头像等添加 `v-img-fallback` 指令：

```vue
<!-- 修改前 -->
<img :src="product.image" :alt="product.name" />

<!-- 修改后 -->
<img v-img-fallback :src="product.image" :alt="product.name" />
```

### 策略 2：使用懒加载

对于长列表页面（搜索结果、商品列表等），使用 `v-lazy-img`：

```vue
<!-- 修改前 -->
<img :src="product.image" :alt="product.name" />

<!-- 修改后 -->
<img v-lazy-img="product.image" :alt="product.name" />
```

### 策略 3：整合现有组件

检查 `SafeImage.vue` 组件，看是否可以整合图片占位符功能。

## 实施计划

### 第一阶段：核心商品页面（高优先级）
1. ✅ 首页相关（3个文件）
2. ✅ 商品/商户相关（8个文件）
3. ✅ 订单/票务相关（5个文件）
4. ✅ 优惠券/活动相关（2个文件）

**预计影响**：约 50+ 个图片元素

### 第二阶段：用户社交页面（中优先级）
5. ✅ 个人中心相关（3个文件）
6. ✅ 社交/互动相关（3个文件）

**预计影响**：约 15+ 个图片元素

### 第三阶段：功能工具页面（低优先级）
7. ✅ 其他功能页面（6个文件）
8. ✅ 通用组件（1个文件）

**预计影响**：约 5+ 个图片元素

## 预期效果

应用图片占位符后：

✅ **用户体验提升**
- 不再看到破损的图片图标
- 页面视觉更完整、更专业

✅ **性能优化**
- 使用懒加载减少初始加载时间
- 减少无效的网络请求

✅ **维护性提升**
- 统一的图片错误处理
- 减少用户反馈的图片问题

## 注意事项

1. **保持原有功能**：添加指令时不影响原有的图片加载逻辑
2. **测试验证**：每个页面修改后都要测试图片加载和错误处理
3. **性能考虑**：长列表优先使用懒加载
4. **占位图选择**：根据页面风格选择 Picsum Photos 或灰色占位图
5. **渐进式应用**：先应用到核心页面，观察效果后再推广

## 下一步行动

建议按照以下顺序实施：

1. **立即开始**：首页和商品相关页面（用户访问最多）
2. **本周完成**：订单和优惠券页面
3. **逐步完善**：其他功能页面

每完成一个阶段，都推送到 GitHub 并在线上验证效果。

